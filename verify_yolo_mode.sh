#!/bin/bash

echo "üß™ YOLO Mode Verification Test"
echo "=============================="
echo ""

echo "üìã Checking Continue Configuration:"
echo "   - Config file exists: $([ -f ~/.continue/.continuerc.json ] && echo '‚úÖ' || echo '‚ùå')"
echo "   - allowExecute: $(jq -r '.allowExecute' ~/.continue/.continuerc.json 2>/dev/null)"
echo "   - confirmBeforeExecute: $(jq -r '.confirmBeforeExecute' ~/.continue/.continuerc.json 2>/dev/null)"
echo "   - enableYoloMode: $(jq -r '.enableYoloMode' ~/.continue/.continuerc.json 2>/dev/null)"
echo "   - toolApprovalPolicy: $(jq -r '.toolApprovalPolicy' ~/.continue/.continuerc.json 2>/dev/null)"
echo ""

echo "üîÑ Testing Ollama Connection:"
echo "   - Daemon status: $(curl -s http://localhost:11434/api/tags >/dev/null && echo '‚úÖ Running' || echo '‚ùå Not running')"
echo ""

echo "üìù MANUAL VERIFICATION REQUIRED:"
echo "================================"
echo ""
echo "1. Open VS Code and Continue chat"
echo "2. Type this exact message:"
echo "   'Run: echo \"YOLO mode working!\"'"
echo ""
echo "3. Check results:"
echo "   ‚úÖ If you see 'YOLO mode working!' without any approval dialogs = SUCCESS"
echo "   ‚ùå If you see approval prompts = YOLO mode still broken"
echo ""
echo "4. If broken, try these additional steps:"
echo "   - In VS Code: Cmd+Shift+P ‚Üí 'Continue: Open Settings'"
echo "   - Set ALL Tool Policies to AUTOMATIC manually"
echo "   - Restart VS Code again"
echo ""

echo "üéØ Expected Outcome:"
echo "==================="
echo "Continue should execute terminal commands instantly"
echo "No 'Allow this action?' popups should appear"
echo "File edits should happen automatically"