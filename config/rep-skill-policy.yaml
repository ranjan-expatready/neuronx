# Rep Skill & Governance Policy
# Defines skill-based permissions and governance for human actors
# Ensures NeuronX remains the authority while scaling rep capabilities

enforcementMode: monitor_only # monitor_only | block

# Skill Tier Definitions
skillTiers:
  L1:
    name: 'Script-Locked'
    description: 'Entry-level reps with maximum safety controls'
    allowedFSMTransitions:
      - 'prospect_identified->initial_contact'
      - 'initial_contact->qualified'
      - 'qualified->closed_lost'
    blockedFSMTransitions:
      - '*->closed_won' # Cannot close deals
      - '*->verbal_commit' # Cannot commit verbally
      - '*->negotiation' # Cannot negotiate
    allowedVoiceModes:
      - 'AUTONOMOUS'
      - 'ASSISTED'
    blockedVoiceModes:
      - 'HUMAN_ONLY'
    maxDealValue: 5000
    canRecommendQualification: false
    canRecommendDisqualification: false
    canOverrideDecisions: false
    requiresSupervisorApproval: true
    escalationRequired: true

  L2:
    name: 'Script-Guided'
    description: 'Experienced reps with guided autonomy'
    allowedFSMTransitions:
      - 'prospect_identified->initial_contact'
      - 'initial_contact->qualified'
      - 'qualified->proposal_sent'
      - 'proposal_sent->closed_lost'
      - 'qualified->closed_lost'
    blockedFSMTransitions:
      - '*->closed_won'
      - '*->verbal_commit'
      - '*->negotiation'
    allowedVoiceModes:
      - 'AUTONOMOUS'
      - 'ASSISTED'
      - 'HUMAN_ONLY' # Limited human-only
    blockedVoiceModes: []
    maxDealValue: 25000
    canRecommendQualification: true
    canRecommendDisqualification: true
    canOverrideDecisions: false
    requiresSupervisorApproval: false
    escalationRequired: false

  L3:
    name: 'Script-Optional'
    description: 'High-performing reps with significant autonomy'
    allowedFSMTransitions:
      - 'prospect_identified->initial_contact'
      - 'initial_contact->qualified'
      - 'qualified->proposal_sent'
      - 'proposal_sent->negotiation'
      - 'negotiation->verbal_commit'
      - 'verbal_commit->closed_won'
      - '*->closed_lost' # Can disqualify at any point
    blockedFSMTransitions: []
    allowedVoiceModes:
      - 'AUTONOMOUS'
      - 'ASSISTED'
      - 'HUMAN_ONLY'
    blockedVoiceModes: []
    maxDealValue: 100000
    canRecommendQualification: true
    canRecommendDisqualification: true
    canOverrideDecisions: false
    requiresSupervisorApproval: false
    escalationRequired: false

  L4:
    name: 'Supervisor'
    description: 'Senior reps and managers with override authority'
    allowedFSMTransitions:
      - '*' # All transitions allowed
    blockedFSMTransitions: []
    allowedVoiceModes:
      - 'AUTONOMOUS'
      - 'ASSISTED'
      - 'HUMAN_ONLY'
    blockedVoiceModes: []
    maxDealValue: 1000000 # No practical limit
    canRecommendQualification: true
    canRecommendDisqualification: true
    canOverrideDecisions: true
    requiresSupervisorApproval: false # They ARE supervisors
    escalationRequired: false

# Risk-Based Restrictions (applies to all tiers)
riskRestrictions:
  highRiskDeals: # Deals over $500K
    allowedTiers: ['L4']
    requiresDualApproval: true
    approvalTimeoutHours: 24

  enterpriseAccounts: # Fortune 500 companies
    allowedTiers: ['L3', 'L4']
    requiresComplianceReview: true

  regulatedIndustries: # Healthcare, Finance, etc.
    allowedTiers: ['L3', 'L4']
    requiresLegalReview: true
    additionalComplianceTraining: true

# Override Policies
overridePolicies:
  decisionOverride:
    allowedTiers: ['L4']
    requiresJustification: true
    justificationMinLength: 50
    requiresSupervisorId: false # L4s are supervisors
    auditRetentionDays: 2555

  escalationRequest:
    allowedTiers: ['L1', 'L2', 'L3', 'L4']
    requiresJustification: true
    justificationMinLength: 25
    autoEscalateTo: 'L4'
    responseTimeoutHours: 4

  emergencyOverride:
    allowedTiers: ['L4']
    requiresJustification: true
    justificationMinLength: 100
    requiresCLevelApproval: true
    approvalTimeoutHours: 2

# Training & Certification Requirements
trainingRequirements:
  L1:
    requiredCertifications: []
    ongoingTrainingHoursPerMonth: 4
    recertificationFrequencyMonths: 6

  L2:
    requiredCertifications: ['sales_fundamentals', 'product_knowledge']
    ongoingTrainingHoursPerMonth: 3
    recertificationFrequencyMonths: 6

  L3:
    requiredCertifications:
      ['advanced_closing', 'objection_handling', 'negotiation']
    ongoingTrainingHoursPerMonth: 2
    recertificationFrequencyMonths: 12

  L4:
    requiredCertifications: ['leadership', 'coaching', 'compliance']
    ongoingTrainingHoursPerMonth: 1
    recertificationFrequencyMonths: 12

# Performance Metrics & Tier Advancement
advancementCriteria:
  L1_to_L2:
    minDealValueClosed: 10000
    minDealsClosed: 3
    minTimeInRoleMonths: 3
    minCustomerSatisfactionScore: 4.0
    requiresSupervisorRecommendation: true

  L2_to_L3:
    minDealValueClosed: 50000
    minDealsClosed: 10
    minTimeInRoleMonths: 6
    minCustomerSatisfactionScore: 4.2
    requiresManagerApproval: true

  L3_to_L4:
    minDealValueClosed: 200000
    minDealsClosed: 25
    minTimeInRoleMonths: 12
    minTeamPerformanceImprovement: 15 # % improvement
    requiresExecutiveApproval: true

# Audit & Compliance
auditPolicies:
  allActionsAudited: true
  skillTierIncludedInAudit: true
  overrideJustificationsRequired: true
  violationEscalationEnabled: true
  complianceReportingEnabled: true

# Emergency Procedures
emergencyProcedures:
  systemFailure:
    allowedTiers: ['L3', 'L4']
    bypassNormalRestrictions: true
    requiresPostEventReview: true

  highPriorityCustomer:
    allowedTiers: ['L3', 'L4']
    temporaryTierElevation: true
    elevationDurationHours: 24
    requiresPostEventJustification: true

# Integration Points
integrationPoints:
  fsmTransitions: true
  voiceOrchestration: true
  executionAuthorization: true
  decisionEngine: true
  billingSystem: false # Skill tiers don't affect billing directly

